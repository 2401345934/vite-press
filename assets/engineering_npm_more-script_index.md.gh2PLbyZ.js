import{_ as t,o as p,c as l,J as a,w as r,m as s,a as h,aa as d,E as i}from"./chunks/framework.DJCjJe2w.js";const v=JSON.parse('{"title":"运行多个 npm script 的各种姿势","description":"","frontmatter":{"createTime":"2022/11/02","tag":"工程化,npm"},"headers":[],"relativePath":"engineering/npm/more-script/index.md","filePath":"engineering/npm/more-script/index.md","lastUpdated":1667401036000}'),c={name:"engineering/npm/more-script/index.md"},k=s("h1",{id:"运行多个-npm-script-的各种姿势",tabindex:"-1"},[h("运行多个 npm script 的各种姿势 "),s("a",{class:"header-anchor",href:"#运行多个-npm-script-的各种姿势","aria-label":'Permalink to "运行多个 npm script 的各种姿势"'},"​")],-1),o=d('<h2 id="让多个-npm-script-串行" tabindex="-1">让多个 npm script 串行？&amp;&amp; <a class="header-anchor" href="#让多个-npm-script-串行" aria-label="Permalink to &quot;让多个 npm script 串行？&amp;&amp;&quot;">​</a></h2><p>在我们运行测试之前确保我们的代码都通过代码检查会是比较不错的实践，这也是让多个 npm script 串行的典型用例，实现方式也比较简单，只需要用 &amp;&amp; 符号把多条 npm script 按先后顺序串起来即可</p><h2 id="让多个-npm-script-并行" tabindex="-1">让多个 npm script 并行？ &amp; <a class="header-anchor" href="#让多个-npm-script-并行" aria-label="Permalink to &quot;让多个 npm script 并行？ &amp;&quot;">​</a></h2><p>在严格串行的情况下，我们必须要确保代码中没有编码规范问题才能运行测试，在某些时候可能并不是我们想要的，因为我们真正需要的是，代码变更时同时给出测试结果和测试运行结果。这就需要把子命令的运行从串行改成并行，实现方式更简单，把连接多条命令的 &amp;&amp; 符号替换成 &amp; 即可。</p><h2 id="wait" tabindex="-1">wait <a class="header-anchor" href="#wait" aria-label="Permalink to &quot;wait&quot;">​</a></h2><p>npm 内置支持的多条命令并行跟 js 里面同时发起多个异步请求非常类似，它只负责触发多条命令，而不管结果的收集</p><p>加上 wait 的额外好处是，如果我们在任何子命令中启动了长时间运行的进程，比如启用了 mocha 的 --watch 配置，可以使用 ctrl + c 来结束进程，如果没加的话，你就没办法直接结束启动到后台的进程。</p><h2 id="有没有更好的管理方式-npm-run-all" tabindex="-1">有没有更好的管理方式？ npm-run-all <a class="header-anchor" href="#有没有更好的管理方式-npm-run-all" aria-label="Permalink to &quot;有没有更好的管理方式？  npm-run-all&quot;">​</a></h2><p>用如下命令将 npm-run-all 添加到项目依赖中：</p><h3 id="下载依赖" tabindex="-1">下载依赖 <a class="header-anchor" href="#下载依赖" aria-label="Permalink to &quot;下载依赖&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm i npm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all xxx1 xxx2 xxx3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>npm-run-all 还支持通配符匹配分组的 npm script，上面的脚本可以进一步简化成</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all xxx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="如何让多个-npm-script-并行执行" tabindex="-1">如何让多个 npm script 并行执行？ <a class="header-anchor" href="#如何让多个-npm-script-并行执行" aria-label="Permalink to &quot;如何让多个 npm script 并行执行？&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parallel </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>',17);function m(u,g,E,b,y,x){const e=i("ArticleMetadata"),n=i("ClientOnly");return p(),l("div",null,[k,a(n,null,{default:r(()=>[a(e)]),_:1}),o])}const f=t(c,[["render",m]]);export{v as __pageData,f as default};
